# deploy local redissyncer service

version: "2.4"

services:
  redissyncer-server:
      image: jiashiwen/redissyncer:3.3.3
      #ports:
      #- "8000:80"
      network_mode: "host"
      mem_limit: 4g 
      environment:
        JAVA_TOOL_OPTIONS: " -XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:MaxRAMFraction=1 -Xms4000m"
        SPRING_ENV: "--server.port=8080 --syncer.config.path.logfile=/log --syncer.config.path.datafile=/ --syncer.config.auth=true --management.endpoints.enabled-by-default=true "
      volumes:
        - /etc/localtime:/etc/localtime:ro
        - ./log:/log
        - ./config:/config
        - ./data:/data
      container_name: redissyncer-server
